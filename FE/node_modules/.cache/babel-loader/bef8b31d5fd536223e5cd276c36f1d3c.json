{"remainingRequest":"/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/node_modules/babel-loader/lib/index.js!/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/src/router/index.js","dependencies":[{"path":"/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/src/router/index.js","mtime":1621617515717},{"path":"/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlUm91dGVyLCBjcmVhdGVXZWJIaXN0b3J5IH0gZnJvbSAidnVlLXJvdXRlciI7CmltcG9ydCBMb2dpblBhZ2UgZnJvbSAiQC92aWV3cy9Mb2dpblBhZ2UiOwppbXBvcnQgSG9tZSBmcm9tICJAL3ZpZXdzL0hvbWUiOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZS9pbmRleCI7CmltcG9ydCBBZG1pbkxvZ2luUGFnZSBmcm9tICIuLi92aWV3cy9BZG1pbkxvZ2luUGFnZSI7CmltcG9ydCBBZG1pblBhZ2UgZnJvbSAiLi4vdmlld3MvQWRtaW5QYWdlIjsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogIi9sb2dpbiIsCiAgbmFtZTogImxvZ2luIiwKICBjb21wb25lbnQ6IExvZ2luUGFnZSwKICBtZXRhOiB7CiAgICBndWVzdDogdHJ1ZQogIH0KfSwgewogIHBhdGg6ICIvbG9naW4vYWRtaW4iLAogIG5hbWU6ICJhZG1pbiBsb2dpbiIsCiAgY29tcG9uZW50OiBBZG1pbkxvZ2luUGFnZSwKICBtZXRhOiB7CiAgICBndWVzdDogdHJ1ZQogIH0KfSwgewogIHBhdGg6ICIvYWRtaW4iLAogIG5hbWU6ICJhZG1pbiBob21lIiwKICBjb21wb25lbnQ6IEFkbWluUGFnZSwKICBtZXRhOiB7CiAgICByZXF1aXJlc0F1dGg6IHRydWUsCiAgICBhZG1pbjogdHJ1ZQogIH0KfSwgewogIHBhdGg6ICIvIiwKICBuYW1lOiAiaG9tZSIsCiAgY29tcG9uZW50OiBIb21lLAogIG1ldGE6IHsKICAgIHJlcXVpcmVzQXV0aDogdHJ1ZQogIH0KfV07CnZhciByb3V0ZXIgPSBjcmVhdGVSb3V0ZXIoewogIGhpc3Rvcnk6IGNyZWF0ZVdlYkhpc3RvcnkoKSwKICByb3V0ZXM6IHJvdXRlcwp9KTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgaWYgKHRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocmVjb3JkKSB7CiAgICByZXR1cm4gcmVjb3JkLm1ldGEucmVxdWlyZXNBdXRoOwogIH0pKSB7CiAgICBpZiAoIXN0b3JlLmdldHRlcnMuaXNBdXRoZW50aWNhdGVkKSB7CiAgICAgIG5leHQoewogICAgICAgIG5hbWU6ICdsb2dpbicKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBpZiAodG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgICAgICByZXR1cm4gcmVjb3JkLm1ldGEuYWRtaW47CiAgICAgIH0pKSB7CiAgICAgICAgaWYgKHN0b3JlLmdldHRlcnMuZ2V0Um9sZSA9PT0gIkFETUlOIikgewogICAgICAgICAgbmV4dCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgbmFtZTogJ2hvbWUnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dCgpOwogICAgICB9CiAgICB9CiAgfSBlbHNlIGlmICh0by5tYXRjaGVkLnNvbWUoZnVuY3Rpb24gKHJlY29yZCkgewogICAgcmV0dXJuIHJlY29yZC5tZXRhLmd1ZXN0OwogIH0pKSB7CiAgICBpZiAoc3RvcmUuZ2V0dGVycy5pc0F1dGhlbnRpY2F0ZWQpIHsKICAgICAgaWYgKHN0b3JlLmdldHRlcnMuZ2V0Um9sZSA9PT0gIkFETUlOIikgewogICAgICAgIG5leHQoewogICAgICAgICAgbmFtZTogJ2FkbWluIGhvbWUnCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dCh7CiAgICAgICAgICBuYW1lOiAnaG9tZScKICAgICAgICB9KTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgbmV4dCgpOwogICAgfQogIH0gZWxzZSB7CiAgICBuZXh0KCk7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/src/router/index.js"],"names":["createRouter","createWebHistory","LoginPage","Home","store","AdminLoginPage","AdminPage","routes","path","name","component","meta","guest","requiresAuth","admin","router","history","beforeEach","to","from","next","matched","some","record","getters","isAuthenticated","getRole"],"mappings":"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","sourcesContent":["import { createRouter, createWebHistory} from \"vue-router\";\nimport LoginPage from \"@/views/LoginPage\";\nimport Home from \"@/views/Home\";\nimport store from \"@/store/index\";\nimport AdminLoginPage from \"../views/AdminLoginPage\";\nimport AdminPage from \"../views/AdminPage\";\n\n\n\nconst routes = [\n    {\n        path: \"/login\",\n        name: \"login\",\n        component: LoginPage,\n        meta:{\n            guest:true\n        }\n    },\n    {\n        path: \"/login/admin\",\n        name: \"admin login\",\n        component: AdminLoginPage,\n        meta:{\n            guest:true\n        }\n    },\n    {\n        path: \"/admin\",\n        name: \"admin home\",\n        component: AdminPage,\n        meta:{\n            requiresAuth:true,\n            admin:true\n        }\n    },\n    {\n        path: \"/\",\n        name: \"home\",\n        component: Home,\n        meta:{\n            requiresAuth:true\n        }\n    }\n];\n\nconst router = createRouter({\n     history: createWebHistory(),\n     routes,\n});\n\nrouter.beforeEach((to, from, next) => {\n    if(to.matched.some(record => record.meta.requiresAuth)){\n        if(!store.getters.isAuthenticated){\n            next({name:'login'});\n        }else{\n            if(to.matched.some(record => record.meta.admin)){\n                if(store.getters.getRole === \"ADMIN\"){\n                    next(); \n                }else{\n                    next({name:'home'}); \n                }\n            }else{\n                next()\n            }\n        }\n    }else if(to.matched.some(record => record.meta.guest)){\n        if(store.getters.isAuthenticated){\n            if(store.getters.getRole === \"ADMIN\"){\n                next({name:'admin home'}); \n            }else{\n                next({name:'home'}); \n            }\n        }else{\n            next();\n        }\n    }\n    else{\n        next();\n    }\n})\n\nexport default router;"]}]}