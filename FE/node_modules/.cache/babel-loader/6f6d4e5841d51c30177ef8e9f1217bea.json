{"remainingRequest":"/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/node_modules/babel-loader/lib/index.js!/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/src/services/http.js","dependencies":[{"path":"/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/src/services/http.js","mtime":1621617515717},{"path":"/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlL2luZGV4IjsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlSHR0cCgpIHsKICB2YXIgc2VjdXJlZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdHJ1ZTsKCiAgaWYgKHNlY3VyZWQpIHsKICAgIHZhciB0aW5nID0gYXhpb3MuY3JlYXRlKHsKICAgICAgaGVhZGVyczogewogICAgICAgICJBdXRob3JpemF0aW9uIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpCiAgICAgIH0KICAgIH0pOyAvLyBBZGQgYSByZXNwb25zZSBpbnRlcmNlcHRvciwgdG8gaGFuZGxlIHN0YXR1cyBjb2RlIDQwMQoKICAgIHRpbmcuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT0gNDAxKSB7CiAgICAgICAgLy9Mb2dzIG91dCB3aGVuIGEgdG9rZW4gbm8gbG9uZ2VyIGlzIHZhbGlkCiAgICAgICAgc3RvcmUuZGlzcGF0Y2goImxvZ291dCIpOwogICAgICB9CgogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgfSk7CiAgICByZXR1cm4gdGluZzsKICB9IGVsc2UgewogICAgdmFyIHRpbmcyID0gYXhpb3MuY3JlYXRlKCk7CiAgICByZXR1cm4gdGluZzI7CiAgfQp9"},{"version":3,"sources":["/Users/thomastran/Documents/FS_Project/idatt2105-project-FE/fs_frontend/src/services/http.js"],"names":["axios","store","createHttp","secured","ting","create","headers","localStorage","getItem","interceptors","response","use","error","status","dispatch","Promise","reject","ting2"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AAEA,eAAe,SAASC,UAAT,GAAoC;AAAA,MAAhBC,OAAgB,uEAAN,IAAM;;AAE/C,MAAIA,OAAJ,EAAa;AACT,QAAIC,IAAI,GAAGJ,KAAK,CAACK,MAAN,CAAa;AACpBC,MAAAA,OAAO,EAAE;AACL,yBAAiBC,YAAY,CAACC,OAAb,CAAqB,KAArB;AADZ;AADW,KAAb,CAAX,CADS,CAMT;;AACAJ,IAAAA,IAAI,CAACK,YAAL,CAAkBC,QAAlB,CAA2BC,GAA3B,CAA+B,UAAUD,QAAV,EAAoB;AAC/C,aAAOA,QAAP;AACH,KAFD,EAEG,UAAUE,KAAV,EAAiB;AAChB,UAAGA,KAAK,CAACF,QAAN,CAAeG,MAAf,IAAyB,GAA5B,EAAgC;AAC5B;AACAZ,QAAAA,KAAK,CAACa,QAAN,CAAe,QAAf;AACH;;AACD,aAAOC,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACH,KARD;AAUA,WAAOR,IAAP;AACH,GAlBD,MAkBO;AACH,QAAIa,KAAK,GAAGjB,KAAK,CAACK,MAAN,EAAZ;AAEA,WAAOY,KAAP;AACH;AACJ","sourcesContent":["import axios from \"axios\";\nimport store from \"@/store/index\";\n\nexport default function createHttp(secured = true) {\n\n    if (secured) {\n        let ting = axios.create({\n            headers: {\n                \"Authorization\": localStorage.getItem('jwt'),\n            }\n        });\n        // Add a response interceptor, to handle status code 401\n        ting.interceptors.response.use(function (response) {\n            return response;\n        }, function (error) {\n            if(error.response.status == 401){\n                //Logs out when a token no longer is valid\n                store.dispatch(\"logout\");\n            }\n            return Promise.reject(error);\n        });\n\n        return ting;\n    } else {\n        let ting2 = axios.create();\n\n        return ting2;\n    }\n}\n"]}]}