var __defProp=Object.defineProperty,__hasOwnProp=Object.prototype.hasOwnProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,o,t)=>o in e?__defProp(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,__assign=(e,o)=>{for(var t in o||(o={}))__hasOwnProp.call(o,t)&&__defNormalProp(e,t,o[t]);if(__getOwnPropSymbols)for(var t of __getOwnPropSymbols(o))__propIsEnum.call(o,t)&&__defNormalProp(e,t,o[t]);return e};!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],o):o((e="undefined"!=typeof globalThis?globalThis:e||self)["mosha-vue-toastify"]={},e.Vue)}(this,(function(e,o){"use strict";const t={type:"default",timeout:5e3,showCloseButton:!0,position:"top-right",transition:"bounce",hideProgressBar:!1,swipeClose:!0},n={"top-left":{bounce:"mosha__bounceInLeft",zoom:"mosha__zoomIn",slide:"mosha__slideInLeft"},"top-right":{bounce:"mosha__bounceInRight",zoom:"mosha__zoomIn",slide:"mosha__slideInRight"},"top-center":{bounce:"mosha__bounceInDown",zoom:"mosha__zoomIn",slide:"mosha__slideInDown"},"bottom-center":{bounce:"mosha__bounceInUp",zoom:"mosha__zoomIn",slide:"mosha__slideInUp"},"bottom-right":{bounce:"mosha__bounceInRight",zoom:"mosha__zoomIn",slide:"mosha__slideInRight"},"bottom-left":{bounce:"mosha__bounceInLeft",zoom:"mosha__zoomIn",slide:"mosha__slideInLeft"}},s=(e,t,n)=>{const s=o.ref(),a=o.ref(void 0),i=o.ref(),r=e=>e instanceof MouseEvent,l=o=>{!1!==n&&s.value&&(r(o)?a.value=s.value.clientX-o.clientX:a.value=s.value.touches[0].clientX-o.touches[0].clientX,i.value=__assign(__assign({},i.value),{transition:"none"}),e.endsWith("left")?i.value.left=-a.value+"px !important":e.endsWith("right")?i.value.right=`${a.value}px !important`:a.value>0?i.value.left=-a.value+"px !important":i.value.right=`${a.value}px !important`,Math.abs(a.value)>200&&t())},p=e=>{!1!==n&&(s.value&&(s.value=void 0),a.value&&(a.value=void 0),removeEventListener(e,l))};return o.onUnmounted((()=>{!1!==n&&(p("mousemove"),p("touchmove"))})),{swipedDiff:a,swipeStart:s,swipeStyle:i,swipeHandler:l,startSwipeHandler:o=>{if(!1===n)return;s.value=o;const t=r(o)?"mousemove":"touchmove",p=r(o)?"mouseup":"touchend";addEventListener(t,l),addEventListener(p,(()=>(o=>{const t={transition:"left .3s ease-out",left:0},n={transition:"right .3s ease-out",right:0};e.endsWith("left")?i.value=__assign(__assign({},i.value),t):e.endsWith("right")?i.value=__assign(__assign({},i.value),n):a.value>0?i.value=__assign(__assign({},i.value),t):a.value&&a.value<0&&(i.value=__assign(__assign({},i.value),n)),s.value=void 0,a.value=void 0,removeEventListener(o,l)})(t)))},cleanUpMove:p}};var a=o.defineComponent({props:{type:{type:String,default:"default"}}});const i={class:"mosha__icon"},r={key:0,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},l=o.createVNode("path",{d:"M4.47 21h15.06c1.54 0 2.5-1.67 1.73-3L13.73 4.99c-.77-1.33-2.69-1.33-3.46 0L2.74 18c-.77 1.33.19 3 1.73 3zM12 14c-.55 0-1-.45-1-1v-2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"},null,-1),p={key:1,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},u=o.createVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 11c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"},null,-1),c={key:2,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},d=o.createVNode("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),m=o.createVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.29 16.29L5.7 12.7c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-7.59 7.59c-.38.39-1.02.39-1.41 0z"},null,-1),h={key:3,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#616161"},f=o.createVNode("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),v=o.createVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1),_={key:4,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},g=o.createVNode("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),w=o.createVNode("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1);a.render=function(e,t,n,s,a,y){return o.openBlock(),o.createBlock("span",i,["warning"===e.type?(o.openBlock(),o.createBlock("svg",r,[l])):"danger"===e.type?(o.openBlock(),o.createBlock("svg",p,[u])):"success"===e.type?(o.openBlock(),o.createBlock("svg",c,[d,m])):"default"===e.type?(o.openBlock(),o.createBlock("svg",h,[f,v])):(o.openBlock(),o.createBlock("svg",_,[g,w]))])};var y=o.defineComponent({name:"MToast",components:{MIcon:a},props:{visible:Boolean,text:{type:String,default:""},description:{type:String,default:""},toastBackgroundColor:{type:String,default:""},type:{type:String,default:"default"},onCloseHandler:{type:Function,required:!0},offset:Number,id:{type:Number,required:!0},timeout:{type:Number,default:5e3},position:{type:String,required:!0},showCloseButton:{type:Boolean,default:!0},swipeClose:{type:Boolean,default:!0},hideProgressBar:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},transition:{type:String,default:"bounce"}},setup(e){const t=o.ref(),{swipedDiff:a,startSwipeHandler:i,swipeStyle:r,cleanUpMove:l}=s(e.position,e.onCloseHandler,e.swipeClose),{transitionType:p}=(u=e.position,c=e.transition,d=a,{transitionType:o.computed((()=>d.value>200?"mosha__fadeOutLeft":d.value<-200?"mosha__fadeOutRight":n[u][c]))});var u,c,d;const{start:m,stop:h,progress:f}=((e,t)=>{const n=o.ref(),s=o.ref(0),a=o.ref(t),i=o.ref(),r=o.ref(100),l=()=>{clearInterval(i.value),clearTimeout(n.value)};return o.onMounted((()=>{})),o.onUnmounted((()=>{l()})),{start:()=>{s.value=Date.now(),clearTimeout(n.value),i.value=setInterval((()=>{r.value--}),t/100-2),n.value=setTimeout(e,a.value)},stop:()=>{clearInterval(i.value),clearTimeout(n.value),a.value-=Date.now()-s.value},clear:l,progress:r}})((()=>{e.onCloseHandler()}),e.timeout),v=()=>{e.timeout>0&&m()};return o.watchEffect((()=>{const{customStyle:n}=((e,t,n)=>{const s=o.computed((()=>{switch(e){case"top-left":return{left:"0",top:`${t}px`};case"bottom-left":return{left:"0",bottom:`${t}px`};case"bottom-right":return{right:"0",bottom:`${t}px`};case"top-center":return{top:`${t}px`,left:"0",right:"0",marginRight:"auto",marginLeft:"auto"};case"bottom-center":return{bottom:`${t}px`,left:"0",right:"0",marginRight:"auto",marginLeft:"auto"};default:return{right:"0",top:`${t}px`}}}));return n.length>0&&(s.value.backgroundColor=n),{customStyle:s}})(e.position,e.offset,e.toastBackgroundColor);t.value=n.value})),o.onMounted((()=>{v()})),{style:t,transitionType:p,startTimer:v,stopTimer:()=>{e.timeout>0&&h()},progress:f,onTouchStart:e=>{i(e)},onMouseLeave:()=>{l("mousemove"),v()},onMouseDown:e=>{i(e)},swipeStyle:r}}});const b={class:"mosha__toast__content-wrapper"},B={class:"mosha__toast__content"},k={class:"mosha__toast__content__text"},x={key:0,class:"mosha__toast__content__description"};y.render=function(e,t,n,s,a,i){const r=o.resolveComponent("MIcon");return o.openBlock(),o.createBlock(o.Transition,{name:e.transitionType,type:"animation"},{default:o.withCtx((()=>[e.visible?(o.openBlock(),o.createBlock("div",{key:0,class:["mosha__toast",e.toastBackgroundColor?null:e.type],style:[e.style,e.swipeStyle],onMouseenter:t[2]||(t[2]=(...o)=>e.stopTimer&&e.stopTimer(...o)),onMouseleave:t[3]||(t[3]=(...o)=>e.onMouseLeave&&e.onMouseLeave(...o)),onTouchstart:t[4]||(t[4]=(...o)=>e.onTouchStart&&e.onTouchStart(...o)),onMousedown:t[5]||(t[5]=(...o)=>e.onMouseDown&&e.onMouseDown(...o))},[o.createVNode("div",b,[e.showIcon?(o.openBlock(),o.createBlock(r,{key:0,type:e.type},null,8,["type"])):o.createCommentVNode("",!0),o.createVNode("div",B,[o.createVNode("div",k,o.toDisplayString(e.text),1),e.description.length>0?(o.openBlock(),o.createBlock("div",x,o.toDisplayString(e.description),1)):o.createCommentVNode("",!0)])]),e.showCloseButton?(o.openBlock(),o.createBlock("div",{key:0,class:"mosha__toast__close-icon",onClick:t[1]||(t[1]=(...o)=>e.onCloseHandler&&e.onCloseHandler(...o))})):o.createCommentVNode("",!0),e.hideProgressBar?o.createCommentVNode("",!0):(o.openBlock(),o.createBlock("div",{key:1,class:"mosha__toast__progress",style:{width:`${e.progress}%`}},null,4))],38)):o.createCommentVNode("",!0)])),_:1},8,["name"])};const C={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[],"top-center":[],"bottom-center":[]};let I=0;const z=e=>{const o=__assign(__assign({},e),{type:e.type||t.type,timeout:e.timeout||t.timeout,showCloseButton:e.showCloseButton,position:e.position||t.position,showIcon:e.showIcon,swipeClose:e.swipeClose,transition:e.transition||t.transition});return o.hideProgressBar=void 0!==o.timeout&&o.timeout<=0,void 0!==e.hideProgressBar&&(o.hideProgressBar=e.hideProgressBar),o},S=e=>({text:"string"==typeof e?e:e.title,description:"string"==typeof e?void 0:e.description}),M=e=>{let o=12;if(!e.position)throw new Error("no position");return C[e.position].forEach((({toastVNode:e})=>{const t=e.el.offsetHeight+12;o+=t||0})),o},N=(e,o,t,n)=>__assign(__assign(__assign({},e),o),{id:t,offset:n,visible:!1,onCloseHandler:()=>{P(t,e.position?e.position:"top-right")}}),V=(e,t)=>{const n=M(e),s=I++,a=document.createElement("div");document.body.appendChild(a);const i=o.createVNode(y,N(e,t,s,n));o.render(i,a),e.position&&(C[e.position].push({toastVNode:i,container:a}),i.component&&(i.component.props.visible=!0))},T=(e,o)=>{if(!e)return;const n=S(e),s=o?z(o):t;V(s,n)},P=(e,t)=>{const n=C[t],s=n.findIndex((({toastVNode:o})=>o.props&&e===o.props.id));if(-1===s)return;const{container:a,toastVNode:i}=n[s];if(!i.el)return;const r=i.el.offsetHeight;C[t].splice(s,1),((e,o,t,n)=>{for(let s=e;s<o.length;s++){const{toastVNode:e}=o[s];if(!e.el)return;const a=t.split("-")[0]||"top",i=parseInt(e.el.style[a],10)-n-12;if(!e.component)return;e.component.props.offset=i}})(s,n,t,r),i.component&&(i.component.props.visible=!1,i.component.props.onClose&&i.component.props.onClose(),setTimeout((()=>{o.render(null,a),document.body.removeChild(a)}),1e3))};var L={install:e=>{e.config.globalProperties.$moshaToast=T,e.provide("moshaToast",T)}};e.createToast=T,e.default=L,e.initializeContent=S,e.initializeOptions=z,e.moveToastsOnAdd=M,e.setupVNode=V,e.setupVNodeProps=N,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
